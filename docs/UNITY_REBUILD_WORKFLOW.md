# Shelter 2250 (Fallout Shelter 스타일) — Unity 재제작 워크플로우 (총괄 프로듀서 버전)

## 1) 목표(북극성)와 금지선

### 북극성(플레이 감각)
- **“하루 단위로 의미 있는 선택”**이 계속 발생한다: 배치/건설/치료/연구/위기대응.
- **실패 원인이 명확**하다: 왜 자원이 무너졌고, 어떤 선택이 악순환을 만들었는지 UI/로그로 설명된다.
- **확장 가능한 기반**이다: 이벤트/탐사/경제/특성/국가 콘텐츠가 “붙는 구조”로 설계된다.

### 금지선(이걸 넘기면 바로 빚)
- 핵심 수치가 코드에 흩어진 상태로 기능을 계속 추가한다.
- UI/로직/데이터가 한 파일에 섞여 테스트·조정이 불가능해진다.
- “연출 먼저” 하고 “시뮬레이션”이 뒤따라오게 만든다.

---

## 2) Unity 전환에서 지금 단계의 ‘정답’ 경로

### 결론
Unity로 다시 만들려면 **“시뮬레이션(데이터/틱/룰) → 최소 UI → 저장/불러오기 → 연출”** 순서를 고정한다.

### 왜냐
현재 웹 프로토타입은 기능이 빠르게 붙었지만, 장기적으로는 밸런스/확장/테스트/유지보수를 위해 Unity에서 **데이터 주도형( ScriptableObject )** + **상태 주도형(GameState)** 구조로 재정렬해야 한다.

---

## 3) 제작 단계(Phase)와 게이트(Go/No-Go)

각 Phase는 “완료 정의(DoD)”를 통과해야 다음으로 넘어간다.

### Phase 0 — 전환 결정/리포지토리 정비 (0.5~1일)
**목표**: Unity 프로젝트를 받아줄 형태로 레포/규칙/결정사항 고정.
- 결정: Unity LTS 버전, 타깃 플랫폼(PC 우선 권장), UI(UGUI 권장), 2D 파이프라인(URP 2D 권장)
- 레포 구조: `Unity/`(새 프로젝트) + `WebPrototype/`(현 JS)로 분리(또는 별도 repo)
- `.gitignore`: Unity `Library/Temp/Obj/Build/Logs` 등 기본 제외

**DoD**
- “우리가 무엇을 Unity에서 만들지” 1페이지로 고정(아래 Phase 1 목표 포함)

### Phase 1 — Simulation Only (Vertical Core) (2~4일)
**목표**: 연출 없이도 ‘게임이 돌아가는 뼈대’ 완성.
- 시간/배속(1/2/6x) + 1초 틱 기반 시뮬레이션
- 자원(생산/소비/패널티)
- 방(배치 규칙/비용/업그레이드/생산)
- 거주민(능력치/특성/허기/수분/방사능/피로)
- 저장/불러오기(신규 세이브 안정성)

**DoD**
- “7일 생존 시뮬레이션”을 UI 없이도 로그로 검증 가능
- 배속에 따라 게임 시간이 정확히 가속(60초 실시간 = 1/2/6 시간 게임)

### Phase 2 — Minimal UI + Tutorial (1~3일)
**목표**: 플레이어가 “어떻게 해야 하는지” 즉시 이해하고 첫 성공을 만든다.
- HUD: 자원/시간/배속/캡 수입 표시
- 패널: 건설/거주민/방 정보(최소)
- **튜토리얼(옵션)**: 처음 실행 시 “가이드 진행?” 선택

**DoD**
- 신규 유저가 “첫 3일”을 가이드 따라 생존 가능

### Phase 3 — Content Slice (7일 시나리오) (3~6일)
**목표**: “재미가 나는” 최소 콘텐츠 패키지.
- 이벤트 5~10개(자원 위기/기회/거주민 상태 변화)
- 탐사(간단한 1종) + 보상(캡/부품/의료/방사능)
- 경제(노동 수입 + 보조 수입 + 지출처 연결)

**DoD**
- 7일 시나리오에서 “의사결정 → 결과” 루프가 최소 3번 발생

### Phase 4 — Alpha (시스템 확장) (2~3주)
- 방 종류 확장, 업그레이드/제작/연구 트리 초안
- 국가별 차별점(보너스/이벤트/난이도)
- UI 고도화(툴팁/모달/경고/알림)

### Phase 5 — Beta (밸런스/콘텐츠/품질) (2~4주)
- 밸런스 고정(변수 외부화 + 목표 지표 충족)
- 플레이테스트 로그 기반 튜닝
- 성능/저장/UX 안정화

---

## 4) 밸런스 목표(이번 프로젝트의 “숫자 기준”)

### 생존 목표(사용자 요구 반영)
- 기준점: **게임 내 3일** 시점에서 “관리 실수”가 누적되기 시작해야 한다.
- **물/식량 생산이 없으면**(또는 완전히 끊기면) **7일 이내에 체력 0 도달**(개인차/특성으로 ±1일 허용).

### 경제 목표(캡)
- “돈이 어디서 나오나”가 UI에 보인다(캡/초).
- 캡은 **확장/위기대응의 선택 비용**이 되며, 모으는 방식(노동/탐사/판매/이벤트)이 분리돼야 한다.

### 조정 레버(필수로 데이터화)
- 자원 소비율(거주민/방)
- 방 생산량(방 레벨/거주민 효율 포함)
- 건설/업그레이드 비용(캡/부품/금속)
- 캡 수입(기본 임금, 행복/특성/배치 영향)

---

## 5) 현재 워크플로우(.clinerules/.claude/skills)와 비교

### 현재(웹 프로토타입) 워크플로우의 강점
- 빠른 기능 추가 루프(`/add-feature`, `/add-room`, `/balance-game`)
- 세계관 문서가 풍부하고 설계 문서가 상세(`docs/**`)

### 현재의 한계(= Unity 재제작에서 반드시 고쳐야 하는 것)
- “수치/룰”이 코드에 섞여 있어 대규모 밸런스가 어렵다.
- 단일 파일 비대화(`js/game.js`)로 인해 변경 리스크가 크다.
- 테스트/시뮬레이션 자동 검증(패리티 체크)이 없다.

### Unity 워크플로우로 바뀌면 달라지는 점
- “데이터( ScriptableObjects ) → 시스템(순수 C#) → UI(View)”로 분리한다.
- 기능 추가는 “데이터 추가 + 시스템 훅 + UI 연결” 순서를 따른다.

### 비교 표(요약)
| 항목 | 현재(웹) | 목표(Unity) |
|---|---|---|
| 아키텍처 | 렌더/UI/시뮬이 섞이기 쉬움 | 상태/시스템/뷰 분리(테스트 가능) |
| 밸런스 | 코드 수정 위주 | 데이터 수정(SO) + 계측/시뮬 |
| 진행관리 | 체크리스트/문서 중심 | 게이트(DoD) 중심 + 패리티 체크 |
| 확장성 | 기능 추가가 누적될수록 위험 | 시스템 단위로 추가(리스크 제한) |
| QA | 수동 테스트 중심 | 빠른 시나리오 리그(7일/30일) + 로그 |

### Unity 전환용 Codex 보조 도구(이미 준비됨)
- 스킬(로컬 설치): `unity-bootstrap`, `unity-migration`
- MCP(글로벌 설정): `context7`, `fs-shelter2250` (Codex 재시작 후 사용 권장)

---

## 6) 현재 파일/자산 기반 ‘재제작용 자산 목록’

### 설계/레퍼런스(그대로 가져갈 것)
- `docs/INTEGRATED_SYSTEM_DESIGN.md`
- `docs/GAME_DESIGN_EXPANDED.md`
- `docs/UI_UPGRADE_DESIGN.md`
- `docs/worldbuilding/*`
- `reference/*` (UI 레퍼런스 이미지)

### 프로토타입 로직(“스펙”으로만 사용)
- `js/game.js`, `js/room.js`, `js/resources.js`, `js/dweller.js`, `js/shelter.js`
  - Unity로 그대로 “이식”이 아니라, 시스템/데이터로 재해석하는 기준점

---

## 7) 다음 지휘 명령(오늘/내일 바로 할 일)

1. Unity LTS/플랫폼/UI(UGUI) 확정
2. Unity 프로젝트 생성 + 레포 구조 확정(같은 repo vs 별도 repo)
3. Phase 1 “Simulation Only” 작업 항목을 티켓으로 쪼개기(시스템 5개: Time/Resources/Rooms/Dwellers/Save)
4. 튜토리얼: “가이드 시작?” 프롬프트 + 5단계 목표(발전실→정수실→식당→거주→창고/의료) 정의
